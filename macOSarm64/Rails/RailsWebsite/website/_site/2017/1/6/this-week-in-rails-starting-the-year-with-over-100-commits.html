<!doctype html>
<html lang="en">








<head>
  <title>Ruby on Rails &mdash; This Week in Rails: Starting the year with over 100 commits</title>
  <meta charset="utf-8" />
  <meta content="ie=edge" http-equiv="x-ua-compatible" />
  <meta name="handheldfriendly" content="true" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Happy new year! How was your holiday break? Did you receive nice presents?In case you missed it, Ruby 2.4.0 was released on Christmas day so if you haven’t done it yet… rbenv install 2.4.0 right now!The first week of 2017 has seen more than 100 commits to rails/rails. Congratulations to all the 32 contributors, in particular to the 8 people who contributed for the first time. Keep up the good work!Here are the most relevant changes to rails master for this week." />

  <meta property="og:site_name" content="Ruby on Rails" />
  <meta property="og:title" content="This Week in Rails: Starting the year with over 100 commits" />
  <meta property="og:description" content="Happy new year! How was your holiday break? Did you receive nice presents?In case you missed it, Ruby 2.4.0 was released on Christmas day so if you haven’t done it yet… rbenv install 2.4.0 right now!The first week of 2017 has seen more than 100 commits to rails/rails. Congratulations to all the 32 contributors, in particular to the 8 people who contributed for the first time. Keep up the good work!Here are the most relevant changes to rails master for this week." />
  <meta property="og:image" content="http://localhost:4000/assets/images/opengraph.png" />
  <meta property="og:url" content="http://localhost:4000/2017/1/6/this-week-in-rails-starting-the-year-with-over-100-commits" />
  <meta property="og:type" content="article" />

  <meta name="twitter:title" content="This Week in Rails: Starting the year with over 100 commits" />
  <meta name="twitter:description" content="Happy new year! How was your holiday break? Did you receive nice presents?In case you missed it, Ruby 2.4.0 was released on Christmas day so if you haven’t done it yet… rbenv install 2.4.0 right now!The first week of 2017 has seen more than 100 commits to rails/rails. Congratulations to all the 32 contributors, in particular to the 8 people who contributed for the first time. Keep up the good work!Here are the most relevant changes to rails master for this week." />
  <meta name="twitter:image" content="http://localhost:4000/assets/images/opengraph.png" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:creator" content="@rails" />
  <meta name="twitter:image:alt" content="Ruby on Rails" />

  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BlogPosting",
      "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "http://localhost:4000/2017/1/6/this-week-in-rails-starting-the-year-with-over-100-commits"
      },
      "name": "Ruby on Rails",
      "headline": "This Week in Rails: Starting the year with over 100 commits",
      "description": "Happy new year! How was your holiday break? Did you receive nice presents?In case you missed it, Ruby 2.4.0 was released on Christmas day so if you haven’t done it yet… rbenv install 2.4.0 right now!The first week of 2017 has seen more than 100 commits to rails/rails. Congratulations to all the 32 contributors, in particular to the 8 people who contributed for the first time. Keep up the good work!Here are the most relevant changes to rails master for this week.",
      "url": "http://localhost:4000/2017/1/6/this-week-in-rails-starting-the-year-with-over-100-commits",
      "image": "http://localhost:4000/assets/images/opengraph.png",
      "author": {
        "@type": "Person",
        "name": "claudiob"
      },
      "datePublished": "2017-01-06T00:00:00+05:30"
    }
  </script>
  <script defer data-domain="rubyonrails.org" src="https://plausible.io/js/script.js"></script>
  <link rel="icon" href="/assets/images/favicon.png" />
  <link rel="stylesheet" href="/assets/css/style.css" />
  <link rel="alternate" type="application/rss+xml"  href="/feed.xml" title="The official Ruby on Rails blog">
</head>


<body>


<nav class="nav">
  <a class="nav__logo" href="/" aria-label="Ruby on Rails"></a>

  <input class="nav__checkbox" id="nav__checkbox" type="checkbox" role="button" aria-label="menu" />

  <label class="nav__toggle" for="nav__checkbox">
    <span></span>
  </label>

  <div class="nav__options">
    <div>
      <ul>
        
          
            <li><a href="https://github.com/rails/rails"><span>Source</span></a></li>
          
        
          
            <li><a href="/docs"><span>Docs</span></a></li>
          
        
          
            <li><a href="/community"><span>Community</span></a></li>
          
        
          
            <li><a href="/blog"><span>News</span></a></li>
          
        
      </ul>

      <ul>
        
          
            <li><a href="/world"><span>Events</span></a></li>
          
        
          
            <li><a href="https://jobs.rubyonrails.org"><span>Jobs</span></a></li>
          
        
          
            <li><a href="https://merch.rubyonrails.org"><span>Merch</span></a></li>
          
        
          
            <li><a href="/foundation"><span>Foundation</span></a></li>
          
        
      </ul>
    </div>
  </div>
</nav>


<div class="layout">
  <div class="post common-padding--bottom common-padding--top-small">
    <div class="container">
      <div class="post__headline common-headline">
        <h5>Friday, January 6, 2017</h5>
        <h2>This Week in Rails: Starting the year with over 100 commits</h2>

        <h6>Posted by claudiob</h6>

      </div>
      <div class="post__content common-content common-content--post">
        <p>Happy new year! How was your holiday break? Did you receive nice presents?
In case you missed it, Ruby 2.4.0 was released on Christmas day so if you haven’t done it yet… <code class="language-plaintext highlighter-rouge">rbenv install 2.4.0</code> right now!</p>

<p>The first week of 2017 has seen <a href="https://github.com/rails/rails/compare/master@%7B2016-12-31%7D...@%7B2017-01-06%7D">more than 100 commits to rails/rails</a>. 
Congratulations to all the <a href="http://contributors.rubyonrails.org/contributors/in-time-window/20161231-20170106">32 contributors</a>, in particular to the 8 people who contributed for the first time. Keep up the good work!</p>

<p>Here are the most relevant changes to rails master for this week.</p>

<h2 id="new">New</h2>

<h3 id="allow-to-set-custom-content-type-for-email-attachments"><a href="https://github.com/rails/rails/pull/27227">Allow to set custom content type for email attachments</a></h3>

<p>With Action Mailer it’s now easy to specify the content type of your attachments. E.g.: <code class="language-plaintext highlighter-rouge">mail(body: "\&lt;h1\&gt;Hello\&lt;/h1\&gt;", content_type: "text/html")</code>.</p>

<h3 id="added-option-to-activerecordcountercache-methods"><a href="https://github.com/rails/rails/commit/bf77e641ce807857fcf804250c4f8ce817ae66be">Added option to ActiveRecord::CounterCache methods</a></h3>

<p>You can now ask Active Record to update specific timestamp columns when incrementing, decrementing, resetting, or updating counter caches.</p>

<h3 id="default-railsenv-to-development-when-missing"><a href="https://github.com/rails/rails/pull/27399">Default Rails.env to development when missing</a></h3>

<p>If your app does not set <code class="language-plaintext highlighter-rouge">RAILS_ENV</code> or <code class="language-plaintext highlighter-rouge">RACK_ENV</code> then the value of <code class="language-plaintext highlighter-rouge">Rails.env</code> will fall back to <code class="language-plaintext highlighter-rouge">development</code> rather than just being an empty string.</p>

<h2 id="improved">Improved</h2>

<h3 id="improve-arraysum-with-ruby-refinements"><a href="https://github.com/rails/rails/pull/27363">Improve Array#sum with Ruby refinements</a></h3>

<p>Array#sum was defined in Rails with a monkey-patch. Ruby 2.0 introduced refinements for better encapsulation. This is the first PR where they are being used in rails/rails.</p>

<h3 id="ensure-rails-42-works-with-ruby-24"><a href="https://github.com/rails/rails/pull/27473">Ensure Rails 4.2 works with Ruby 2.4</a></h3>

<p>Some tests and code have been fixed and backported to 4-2-stable so that running Rails 4.2 on Ruby 2.4 will not raise any error. </p>

<h3 id="change-return-value-of-duplicable"><a href="https://github.com/rails/rails/pull/27293">Change return value of <code class="language-plaintext highlighter-rouge">duplicable?</code></a></h3>

<p>In Ruby 2.4, NilClass, FalseClass, TrueClass, Symbol and Numeric all support <code class="language-plaintext highlighter-rouge">dup</code>. For consistency, <code class="language-plaintext highlighter-rouge">duplicable?</code> will now return <code class="language-plaintext highlighter-rouge">true</code> for all these classes.</p>

<h2 id="fixed">Fixed</h2>

<h3 id="serialize-json-attribute-value-nil-as-sql-null"><a href="https://github.com/rails/rails/pull/25670">Serialize JSON attribute value nil as SQL NULL</a></h3>

<p>The way in which a <code class="language-plaintext highlighter-rouge">nil</code> JSON payload is stored in a database was inadvertently changed in Rails 5.0. This fix maps <code class="language-plaintext highlighter-rouge">nil</code> to SQL <code class="language-plaintext highlighter-rouge">NULL</code>, exactly as how it was in Rails 4.x.</p>

<h3 id="fix-generator-command-for-nested-namespaced-rails-engines"><a href="https://github.com/rails/rails/pull/27550">Fix generator command for nested namespaced rails engines</a></h3>

<p>If the name of your Rails engine has a hyphen then this PR (fixing the path of namespaced controllers) is for you! </p>

<h3 id="update-cookies-helper-on-all-http-requests"><a href="https://github.com/rails/rails/pull/27586">Update <code class="language-plaintext highlighter-rouge">cookies</code> helper on all HTTP requests</a></h3>

<p>This fixes a regression by which cookies were only updated on GET requests. Now we will update the helper for all requests.</p>

<h2 id="removed">Removed</h2>

<h3 id="remove-support-for-mysql"><a href="https://github.com/rails/rails/pull/27435">Remove support for MySQL</a></h3>

<p>MySQL 5.0 reached “end of life” more than five years ago. Rails now requires at least version 5.1.10.</p>

<h3 id="remove-previously-deprecated-code"><a href="https://github.com/rails/rails/commit/e229580b4b1d4001b5a9450e0a50e0c33a779fe1">Remove previously deprecated code</a></h3>

<p>By now, you should have already dropped any reference to Rake’s <code class="language-plaintext highlighter-rouge">db:test:clone</code>, Configuration’s <code class="language-plaintext highlighter-rouge">serve_static_files</code> and <code class="language-plaintext highlighter-rouge">static_cache_control</code> and ActiveRecord’s <code class="language-plaintext highlighter-rouge">uniq</code>, <code class="language-plaintext highlighter-rouge">uniq!</code>, <code class="language-plaintext highlighter-rouge">uniq_value</code>, <code class="language-plaintext highlighter-rouge">insert_sql</code>, <code class="language-plaintext highlighter-rouge">update_sql</code>, <code class="language-plaintext highlighter-rouge">delete_sql</code>.</p>

<h2 id="wrapping-up">Wrapping up</h2>

<p>That’s it from <a href="https://github.com/claudiob">Claudio</a>. I hope you enjoyed this issue. And now… let me go back to writing my RailsConf proposal… I only have 14 days left to <a href="http://cfp.railsconf.com/events/railsconf2017">submit a good talk</a>!</p>

<p>See you all in Phoenix at the end of April!</p>


      </div>
    </div>
  </div>
</div>

<footer class="footer common-background--grey common-padding--bottom common-padding--top common-shape--top-white-up-left">
  <div class="footer__logo"><a href="/" aria-label="Ruby on Rails"></a></div>

  
</footer>

</body>
</html>
