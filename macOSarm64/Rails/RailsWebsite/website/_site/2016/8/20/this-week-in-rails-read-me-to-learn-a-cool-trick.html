<!doctype html>
<html lang="en">








<head>
  <title>Ruby on Rails &mdash; This Week in Rails: Read Me To Learn A Cool Trick‚Ñ¢!</title>
  <meta charset="utf-8" />
  <meta content="ie=edge" http-equiv="x-ua-compatible" />
  <meta name="handheldfriendly" content="true" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="This is Godfrey, reporting in from Portland, OR. We have a lot to cover this week, let‚Äôs dive right into the stories so you can go back to watching Olympics!üëÄüëÖ" />

  <meta property="og:site_name" content="Ruby on Rails" />
  <meta property="og:title" content="This Week in Rails: Read Me To Learn A Cool Trick‚Ñ¢!" />
  <meta property="og:description" content="This is Godfrey, reporting in from Portland, OR. We have a lot to cover this week, let‚Äôs dive right into the stories so you can go back to watching Olympics!üëÄüëÖ" />
  <meta property="og:image" content="http://localhost:4000/assets/images/opengraph.png" />
  <meta property="og:url" content="http://localhost:4000/2016/8/20/this-week-in-rails-read-me-to-learn-a-cool-trick" />
  <meta property="og:type" content="article" />

  <meta name="twitter:title" content="This Week in Rails: Read Me To Learn A Cool Trick‚Ñ¢!" />
  <meta name="twitter:description" content="This is Godfrey, reporting in from Portland, OR. We have a lot to cover this week, let‚Äôs dive right into the stories so you can go back to watching Olympics!üëÄüëÖ" />
  <meta name="twitter:image" content="http://localhost:4000/assets/images/opengraph.png" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:creator" content="@rails" />
  <meta name="twitter:image:alt" content="Ruby on Rails" />

  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BlogPosting",
      "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "http://localhost:4000/2016/8/20/this-week-in-rails-read-me-to-learn-a-cool-trick"
      },
      "name": "Ruby on Rails",
      "headline": "This Week in Rails: Read Me To Learn A Cool Trick‚Ñ¢!",
      "description": "This is Godfrey, reporting in from Portland, OR. We have a lot to cover this week, let‚Äôs dive right into the stories so you can go back to watching Olympics!üëÄüëÖ",
      "url": "http://localhost:4000/2016/8/20/this-week-in-rails-read-me-to-learn-a-cool-trick",
      "image": "http://localhost:4000/assets/images/opengraph.png",
      "author": {
        "@type": "Person",
        "name": "chancancode"
      },
      "datePublished": "2016-08-20T00:00:00+05:30"
    }
  </script>
  <script defer data-domain="rubyonrails.org" src="https://plausible.io/js/script.js"></script>
  <link rel="icon" href="/assets/images/favicon.png" />
  <link rel="stylesheet" href="/assets/css/style.css" />
  <link rel="alternate" type="application/rss+xml"  href="/feed.xml" title="The official Ruby on Rails blog">
</head>


<body>


<nav class="nav">
  <a class="nav__logo" href="/" aria-label="Ruby on Rails"></a>

  <input class="nav__checkbox" id="nav__checkbox" type="checkbox" role="button" aria-label="menu" />

  <label class="nav__toggle" for="nav__checkbox">
    <span></span>
  </label>

  <div class="nav__options">
    <div>
      <ul>
        
          
            <li><a href="https://github.com/rails/rails"><span>Source</span></a></li>
          
        
          
            <li><a href="/docs"><span>Docs</span></a></li>
          
        
          
            <li><a href="/community"><span>Community</span></a></li>
          
        
          
            <li><a href="/blog"><span>News</span></a></li>
          
        
      </ul>

      <ul>
        
          
            <li><a href="/world"><span>Events</span></a></li>
          
        
          
            <li><a href="https://jobs.rubyonrails.org"><span>Jobs</span></a></li>
          
        
          
            <li><a href="https://merch.rubyonrails.org"><span>Merch</span></a></li>
          
        
          
            <li><a href="/foundation"><span>Foundation</span></a></li>
          
        
      </ul>
    </div>
  </div>
</nav>


<div class="layout">
  <div class="post common-padding--bottom common-padding--top-small">
    <div class="container">
      <div class="post__headline common-headline">
        <h5>Saturday, August 20, 2016</h5>
        <h2>This Week in Rails: Read Me To Learn A Cool Trick‚Ñ¢!</h2>

        <h6>Posted by chancancode</h6>

      </div>
      <div class="post__content common-content common-content--post">
        <p>This is <a href="https://twitter.com/chancancode">Godfrey</a>, reporting in from Portland, OR. We have a lot to cover this week, let‚Äôs dive right into the stories so you can go back to watching Olympics!</p>

<p>üëÄ<br />
üëÖ</p>

<h2 id="cool-trick">Cool Trick‚Ñ¢</h2>

<h3 id="router-visualizer"><a href="https://github.com/rails/rails/pull/26156">Router Visualizer</a></h3>

<p>Have you ever wondered what happens when you visit a URL (say <strong>/posts/5</strong> ) in your Rails app? How does the Rails router know where to send your users?</p>

<p>The first (of many) step is to compare the URL against the routes table for potential matches. To make this lookup as fast as possible, the routes table is pre-compiled into a <a href="https://en.wikipedia.org/wiki/Finite-state_machine">finite state machine</a>, specifically a <a href="https://en.wikipedia.org/wiki/Nondeterministic_finite_automaton">nondeterministic finite automaton (NFA)</a>.</p>

<p>If that sounds very intimidating, don‚Äôt worry! The Rails router actually comes with a debugging tool that could generates an <a href="http://tenderlove.github.io/fsmjs">interactive visualization</a> of your router NFA.</p>

<p>To generate one for your app, simply run <strong>Rails.application.routes.router.visualizer</strong> from your Rails console and save the returned string into an html file. (You will need the <strong>dot</strong> command-line tool for this ‚Äì OS X users can get it from homebrew with <strong>brew install graphviz.</strong> )</p>

<p>‚Ä¶</p>

<p>Oh, is it not working? I forgot to mention that this tool is broken on Rails 5 by an internal refactor. Don‚Äôt worry though, because Seth fixed it for us in this pull request, which would come out with the next 5.0 patch release. If you are impatient, you could try it out by running the 5-0-stable branch.</p>

<p>Before you build your next billion-dollar startup with this awesome tool, please note that this is an undocumented ( <strong>private!</strong> ) API, and as you can see, could break unexpectedly between versions (or go away entirely).</p>

<p>While it‚Äôs definitely not Production Grade‚Ñ¢ software, it‚Äôs still very useful for learning and debugging purposes. Enjoy it while it lasts!</p>

<h2 id="new-stuff">New Stuff</h2>

<h3 id="optional-schemarb-alignment"><a href="https://github.com/rails/rails/pull/25675">Optional schema.rb Alignment</a></h3>

<p>When dumping the schema, Rails tries to align things vertically for readability. However, this could result in a bigger diff than you would like when making changes to an existing table. With this PR, you now have an option to turn that off!</p>

<h3 id="controller-tests-now-supports-as-option"><a href="https://github.com/rails/rails/pull/26212">Controller Tests Now Supports <code class="language-plaintext highlighter-rouge">as</code> Option</a></h3>

<p>While integration tests are <a href="https://github.com/rails/rails/pull/25862">strongly preferred</a> over controller tests going forward, this PR allows you to simulate a request content type in controller tests using the same <strong>as: :json</strong> (or <strong>as: :xml</strong> , and so on) option.¬†</p>

<h3 id="retry_on-gets-a-job"><a href="https://github.com/rails/rails/commit/a1e4c197cb12fef66530a2edfaeda75566088d1f"><code class="language-plaintext highlighter-rouge">retry_on</code> Gets A Job</a></h3>

<p>Active Job‚Äôs <strong>retry_on</strong> API can now access to the job instance that failed, in addition to the exception object.</p>

<h3 id="make-touch_later-respects-no_touching"><a href="https://github.com/rails/rails/pull/26183">Make <code class="language-plaintext highlighter-rouge">touch_later</code> Respects <code class="language-plaintext highlighter-rouge">no_touching</code></a></h3>

<p>The <strong>no_touching</strong> API now composes correctly with <strong>touch_later</strong> as you would expect.</p>

<h3 id="query-with-arrays-and-ranges"><a href="https://github.com/rails/rails/pull/26074">Query With Arrays and Ranges</a></h3>

<p>With this PR, you will be able to pass an Array or Range object to <strong>where(some_column: ‚Ä¶)</strong>¬†when querying an array/range column, assuming your database supports those column types.</p>

<h3 id="fix-upgrade-task-documentation"><a href="https://github.com/rails/rails/pull/26176">Fix Upgrade Task Documentation</a></h3>

<p>This is a periodic PSA that when it comes to upgrading Rails apps, the update task is going to be your friend. In Rails 5, this command has been renamed to <strong>rails app:update</strong> , whereas when upgrading to Rails 4.2 and below, you would want to use <strong>rake rails:update</strong> instead.</p>

<p>See the <a href="http://edgeguides.rubyonrails.org/upgrading_ruby_on_rails.html#the-update-task">upgrade guide</a> for more details.</p>

<h2 id="in-case-you-missed-it">In Case You Missed It‚Ä¶</h2>

<h3 id="active-job-defaults-to-async-adapter"><a href="https://github.com/rails/rails/pull/26214">Active Job Defaults To Async Adapter</a></h3>

<p>In case you missed it, Active Job in Rails 5 defaults to using the ‚Äúasync‚Äù adapter for jobs processing (the previous default was the ‚Äúinline‚Äù adapter). The documentation has been updated to reflect that change.</p>

<h2 id="wrapping-up">Wrapping Up</h2>

<p>That‚Äôs it from This Week in Rails! As always, there were a lot more changes than we have room for. If you are interested, definitely go¬†<a href="https://github.com/rails/rails/compare/master@%7B2016-08-06%7D...@%7B2016-08-12%7D">check them out</a>¬†yourself!</p>

<p>Until next week!</p>


      </div>
    </div>
  </div>
</div>

<footer class="footer common-background--grey common-padding--bottom common-padding--top common-shape--top-white-up-left">
  <div class="footer__logo"><a href="/" aria-label="Ruby on Rails"></a></div>

  
</footer>

</body>
</html>
