<!doctype html>
<html lang="en">








<head>
  <title>Ruby on Rails &mdash; This week in Rails: Rails 4.2.6.rc1 and 4.1.15.rc1, AS::Executor and AS::Reloader APIs and more!</title>
  <meta charset="utf-8" />
  <meta content="ie=edge" http-equiv="x-ua-compatible" />
  <meta name="handheldfriendly" content="true" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Hi All!" />

  <meta property="og:site_name" content="Ruby on Rails" />
  <meta property="og:title" content="This week in Rails: Rails 4.2.6.rc1 and 4.1.15.rc1, AS::Executor and AS::Reloader APIs and more!" />
  <meta property="og:description" content="Hi All!" />
  <meta property="og:image" content="http://localhost:4000/assets/images/opengraph.png" />
  <meta property="og:url" content="http://localhost:4000/2016/3/4/this-week-in-rails-rails-4-2-6-rc1-and-4-1-15-rc1-as-executor-and-as-reloader-apis-and-more" />
  <meta property="og:type" content="article" />

  <meta name="twitter:title" content="This week in Rails: Rails 4.2.6.rc1 and 4.1.15.rc1, AS::Executor and AS::Reloader APIs and more!" />
  <meta name="twitter:description" content="Hi All!" />
  <meta name="twitter:image" content="http://localhost:4000/assets/images/opengraph.png" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:creator" content="@rails" />
  <meta name="twitter:image:alt" content="Ruby on Rails" />

  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BlogPosting",
      "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "http://localhost:4000/2016/3/4/this-week-in-rails-rails-4-2-6-rc1-and-4-1-15-rc1-as-executor-and-as-reloader-apis-and-more"
      },
      "name": "Ruby on Rails",
      "headline": "This week in Rails: Rails 4.2.6.rc1 and 4.1.15.rc1, AS::Executor and AS::Reloader APIs and more!",
      "description": "Hi All!",
      "url": "http://localhost:4000/2016/3/4/this-week-in-rails-rails-4-2-6-rc1-and-4-1-15-rc1-as-executor-and-as-reloader-apis-and-more",
      "image": "http://localhost:4000/assets/images/opengraph.png",
      "author": {
        "@type": "Person",
        "name": "vipulnsward"
      },
      "datePublished": "2016-03-04T00:00:00+05:30"
    }
  </script>
  <script defer data-domain="rubyonrails.org" src="https://plausible.io/js/script.js"></script>
  <link rel="icon" href="/assets/images/favicon.png" />
  <link rel="stylesheet" href="/assets/css/style.css" />
  <link rel="alternate" type="application/rss+xml"  href="/feed.xml" title="The official Ruby on Rails blog">
</head>


<body>


<nav class="nav">
  <a class="nav__logo" href="/" aria-label="Ruby on Rails"></a>

  <input class="nav__checkbox" id="nav__checkbox" type="checkbox" role="button" aria-label="menu" />

  <label class="nav__toggle" for="nav__checkbox">
    <span></span>
  </label>

  <div class="nav__options">
    <div>
      <ul>
        
          
            <li><a href="https://github.com/rails/rails"><span>Source</span></a></li>
          
        
          
            <li><a href="/docs"><span>Docs</span></a></li>
          
        
          
            <li><a href="/community"><span>Community</span></a></li>
          
        
          
            <li><a href="/blog"><span>News</span></a></li>
          
        
      </ul>

      <ul>
        
          
            <li><a href="/world"><span>Events</span></a></li>
          
        
          
            <li><a href="https://jobs.rubyonrails.org"><span>Jobs</span></a></li>
          
        
          
            <li><a href="https://merch.rubyonrails.org"><span>Merch</span></a></li>
          
        
          
            <li><a href="/foundation"><span>Foundation</span></a></li>
          
        
      </ul>
    </div>
  </div>
</nav>


<div class="layout">
  <div class="post common-padding--bottom common-padding--top-small">
    <div class="container">
      <div class="post__headline common-headline">
        <h5>Friday, March 4, 2016</h5>
        <h2>This week in Rails: Rails 4.2.6.rc1 and 4.1.15.rc1, AS::Executor and AS::Reloader APIs and more!</h2>

        <h6>Posted by vipulnsward</h6>

      </div>
      <div class="post__content common-content common-content--post">
        <p>Hi All!</p>

<p>This is <a href="https://twitter.com/vipulnsward">Vipul</a> bringing you the latest news from <a href="https://github.com/rails/rails">Rails</a>!</p>

<h2 id="featured">Featured</h2>

<h3 id="this-weeks-rails-contributors"><a href="http://contributors.rubyonrails.org/contributors/in-time-window/20160227-20160304">This week’s Rails contributors</a></h3>

<p>This week 48 contributors helped to move Rails forward! Want to be one of them? Look at the <a href="https://github.com/rails/rails/issues">issues</a> list and make a contribution!</p>

<h3 id="rails-426rc1-and-4115rc1-have-been-released"><a href="https://rubyonrails.org/2016/3/1/Rails-4-2-6-rc1-and-4-1-15-rc1-have-been-released">Rails 4.2.6.rc1 and 4.1.15.rc1 have been released</a></h3>

<p>Rails 4.2.6.rc1 and 4.1.15.rc1 have been released!
If no regressions are found expect the final release around March 4, 2016.</p>

<h3 id="publish-asexecutor-and-asreloader-apis"><a href="https://github.com/rails/rails/pull/23807">Publish AS::Executor and AS::Reloader APIs</a></h3>

<p>These both allow external code to run blocks of user code to do “work” at a similar unit size to a web request without needing to get intimate with Action Dispatch.</p>

<p>This change is intended to allow interested callers (Sidekiq, Action Cable), to just do:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Rails.application.reloader.wrap do
  # run some user code
end
</code></pre></div></div>

<p>and Rails will take care of the interlock, code reloading, returning Active Record connections to the pool, and anything else that might be relevant.
Exciting, if you have ever been stung by concurrent processing in jobs, etc.</p>

<h2 id="new-stuff">New Stuff</h2>

<h3 id="rails-now-defaults-to-puma-3"><a href="https://github.com/rails/rails/pull/23906">Rails now defaults to Puma 3</a></h3>

<p>With related changes from <a href="https://github.com/puma/puma/pull/856">Puma</a>, Puma 3.0 and up introduced compatibility to read from <code class="language-plaintext highlighter-rouge">config/puma.rb</code> when booting from the command <code class="language-plaintext highlighter-rouge">$ rails server</code>. Rails now depends on Puma 3.0, so that support for <code class="language-plaintext highlighter-rouge">config/puma.rb</code> comes out of the box.</p>

<h3 id="add-exclude-option-to-ssl-middleware"><a href="https://github.com/rails/rails/pull/22591">Add <code class="language-plaintext highlighter-rouge">exclude</code> option to SSL middleware</a></h3>

<p>The <code class="language-plaintext highlighter-rouge">force_ssl</code> option redirects each request to HTTPS. This change now allows redirection to be constrained to only whitelisted requests with <code class="language-plaintext highlighter-rouge">exclude</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>config.ssl_options = { redirect: { exclude: -&gt; request { request.path !~ /healthcheck/ } } }
</code></pre></div></div>

<h2 id="improved">Improved</h2>

<h3 id="generate-configspringrb-in-new-applications"><a href="https://github.com/rails/rails/commit/b04d07337fd7bc17e88500e9d6bcd361885a45f8">Generate config/spring.rb in new applications</a></h3>

<p>This change makes the application generator create a new file <code class="language-plaintext highlighter-rouge">config/spring.rb</code>, which tells Spring to watch additional common files, for example <code class="language-plaintext highlighter-rouge">.ruby-version</code>. This file can then be edited to suit each application.</p>

<h3 id="added-log-rendering--when-starting-to-render-a-template"><a href="https://github.com/rails/rails/pull/23915">Added log “Rendering …”, when starting to render a template</a></h3>

<p>This change added log “Rendering …”, when starting to render a template, to log that we have started to render something, at the very beginning.</p>

<p>This helps to easily identify queries called from controller vs views.</p>

<h2 id="deprecations">Deprecations</h2>

<h3 id="deprecate-controller-and-action-path-parameters-in-routes"><a href="https://github.com/rails/rails/commit/6520ea5f7e2215a763ca74bf6cfa87be2347d5df">Deprecate :controller and :action path parameters in routes</a></h3>

<p>Allowing <code class="language-plaintext highlighter-rouge">:controller</code> and <code class="language-plaintext highlighter-rouge">:action</code> values to be specified via the path in <code class="language-plaintext highlighter-rouge">config/routes.rb</code> has been an underlying cause of a number of issues in Rails that have resulted in security releases. In light of this it’s better that controllers and actions are explicitly whitelisted rather than trying to blacklist or sanitize bad values.
This change deprecates passing these options in routes.</p>

<h3 id="deprecate-insertupdatedelete_sql-in-databasestatements"><a href="https://github.com/rails/rails/pull/23086">Deprecate <code class="language-plaintext highlighter-rouge">{insert|update|delete}_sql</code> in <code class="language-plaintext highlighter-rouge">DatabaseStatements</code></a></h3>

<p>This change deprecates <code class="language-plaintext highlighter-rouge">{insert|update|delete}_sql</code> in <code class="language-plaintext highlighter-rouge">ActiveRecord::ConnectionAdapters::DatabaseStatements</code> in favor of <code class="language-plaintext highlighter-rouge">{insert|update|delete}</code> public methods.
Originally, <code class="language-plaintext highlighter-rouge">{insert|update|delete}_sql</code> were protected methods, and were not intended for external use.</p>

<h3 id="deprecate-modulelocal_constants"><a href="https://github.com/rails/rails/commit/86d4e189580e84c4b7effc0c3ebd25b4e8dc4fee">Deprecate <code class="language-plaintext highlighter-rouge">Module.local_constants</code></a></h3>

<p><code class="language-plaintext highlighter-rouge">Module.local_constants</code> has now been deprecated.
After Ruby 1.9 (and since Rails 5 supports Ruby 2.2+), we can easily get the constants that have been defined locally by <code class="language-plaintext highlighter-rouge">Module.constants(false)</code>. Hence, <code class="language-plaintext highlighter-rouge">Module.local_constants</code> is no more necessary.</p>

<h2 id="wrapping-up">Wrapping Up</h2>

<p>That’s all for This week in Rails. As always, there are plenty of things we’re not able to cover here, so take a look at the <a href="https://github.com/rails/rails/compare/master@%7B2016-02-27%7D...@%7B2016-03-04%7D">changes</a> yourself.</p>

<p>Until next time!</p>

      </div>
    </div>
  </div>
</div>

<footer class="footer common-background--grey common-padding--bottom common-padding--top common-shape--top-white-up-left">
  <div class="footer__logo"><a href="/" aria-label="Ruby on Rails"></a></div>

  
</footer>

</body>
</html>
