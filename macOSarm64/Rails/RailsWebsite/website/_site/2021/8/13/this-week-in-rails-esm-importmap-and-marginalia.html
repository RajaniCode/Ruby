<!doctype html>
<html lang="en">








<head>
  <title>Ruby on Rails &mdash; ESM importmap and Marginalia</title>
  <meta charset="utf-8" />
  <meta content="ie=edge" http-equiv="x-ua-compatible" />
  <meta name="handheldfriendly" content="true" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Hi, Wojtek here introducing you to upcoming Rails 7 goodies." />

  <meta property="og:site_name" content="Ruby on Rails" />
  <meta property="og:title" content="ESM importmap and Marginalia" />
  <meta property="og:description" content="Hi, Wojtek here introducing you to upcoming Rails 7 goodies." />
  <meta property="og:image" content="http://localhost:4000/assets/images/opengraph.png" />
  <meta property="og:url" content="http://localhost:4000/2021/8/13/this-week-in-rails-esm-importmap-and-marginalia" />
  <meta property="og:type" content="article" />

  <meta name="twitter:title" content="ESM importmap and Marginalia" />
  <meta name="twitter:description" content="Hi, Wojtek here introducing you to upcoming Rails 7 goodies." />
  <meta name="twitter:image" content="http://localhost:4000/assets/images/opengraph.png" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:creator" content="@rails" />
  <meta name="twitter:image:alt" content="Ruby on Rails" />

  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BlogPosting",
      "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "http://localhost:4000/2021/8/13/this-week-in-rails-esm-importmap-and-marginalia"
      },
      "name": "Ruby on Rails",
      "headline": "ESM importmap and Marginalia",
      "description": "Hi, Wojtek here introducing you to upcoming Rails 7 goodies.",
      "url": "http://localhost:4000/2021/8/13/this-week-in-rails-esm-importmap-and-marginalia",
      "image": "http://localhost:4000/assets/images/opengraph.png",
      "author": {
        "@type": "Person",
        "name": "morgoth85"
      },
      "datePublished": "2021-08-13T00:00:00+05:30"
    }
  </script>
  <script defer data-domain="rubyonrails.org" src="https://plausible.io/js/script.js"></script>
  <link rel="icon" href="/assets/images/favicon.png" />
  <link rel="stylesheet" href="/assets/css/style.css" />
  <link rel="alternate" type="application/rss+xml"  href="/feed.xml" title="The official Ruby on Rails blog">
</head>


<body>


<nav class="nav">
  <a class="nav__logo" href="/" aria-label="Ruby on Rails"></a>

  <input class="nav__checkbox" id="nav__checkbox" type="checkbox" role="button" aria-label="menu" />

  <label class="nav__toggle" for="nav__checkbox">
    <span></span>
  </label>

  <div class="nav__options">
    <div>
      <ul>
        
          
            <li><a href="https://github.com/rails/rails"><span>Source</span></a></li>
          
        
          
            <li><a href="/docs"><span>Docs</span></a></li>
          
        
          
            <li><a href="/community"><span>Community</span></a></li>
          
        
          
            <li><a href="/blog"><span>News</span></a></li>
          
        
      </ul>

      <ul>
        
          
            <li><a href="/world"><span>Events</span></a></li>
          
        
          
            <li><a href="https://jobs.rubyonrails.org"><span>Jobs</span></a></li>
          
        
          
            <li><a href="https://merch.rubyonrails.org"><span>Merch</span></a></li>
          
        
          
            <li><a href="/foundation"><span>Foundation</span></a></li>
          
        
      </ul>
    </div>
  </div>
</nav>


<div class="layout">
  <div class="post common-padding--bottom common-padding--top-small">
    <div class="container">
      <div class="post__headline common-headline">
        <h5>Friday, August 13, 2021</h5>
        <h2>ESM importmap and Marginalia</h2>

        <h6>Posted by morgoth85</h6>

      </div>
      <div class="post__content common-content common-content--post">
        <p>Hi, <a href="https://twitter.com/morgoth85">Wojtek</a> here introducing you to upcoming Rails 7 goodies.</p>

<h3 id="esm-importmap-support"><a href="https://github.com/rails/importmap-rails">ESM importmap support</a></h3>

<p>Modern web apps without JavaScript bundling or transpiling are now possible to build in Rails. Exciting new direction of frontend tooling, that most likely Rails 7.0 will aim. Introduced by DHH in <a href="https://world.hey.com/dhh/modern-web-apps-without-javascript-bundling-or-transpiling-a20f2755">this post</a>.</p>

<h3 id="port-marginalia-gem-to-rails"><a href="https://github.com/rails/rails/pull/42240">Port Marginalia gem to Rails</a></h3>

<p>Configurable tags can be automatically added to all SQL queries generated by Active Record. By default the application, controller and action details are added to the query tags, like this:<br />
<em>SELECT * FROM books /*application:MyApp;controller:books;action:index*/</em></p>

<h3 id="add-multi-db-setup-and-reset-tasks"><a href="https://github.com/rails/rails/pull/42938">Add multi db setup and reset tasks</a></h3>

<p>Added support for multiple databases to <em>rails db:setup</em> and <em>rails db:reset</em>. Now those tasks can be run per database, like <em>rails db:setup:primary</em>.</p>

<h3 id="no-spring-in-default-stack"><a href="https://github.com/rails/rails/pull/42997">No Spring in default stack</a></h3>

<p>Faster computers have meant that most apps wonâ€™t see a big benefit from Spring on small to moderate size apps.</p>

<p><a href="https://contributors.rubyonrails.org/contributors/in-time-window/20210808-20210813">16 people</a> contributed to Rails since last time. All the changes can be checked <a href="https://github.com/rails/rails/compare/@%7B2021-08-08%7D...main@%7B2021-08-13%7D">here.</a> Until next week!</p>

      </div>
    </div>
  </div>
</div>

<footer class="footer common-background--grey common-padding--bottom common-padding--top common-shape--top-white-up-left">
  <div class="footer__logo"><a href="/" aria-label="Ruby on Rails"></a></div>

  
</footer>

</body>
</html>
